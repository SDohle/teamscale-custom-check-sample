<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<title>Source code</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<div class="sourceContainer">
<pre><span class="sourceLineNo">001</span>/*-----------------------------------------------------------------------+<a name="line.1"></a>
<span class="sourceLineNo">002</span> | eu.cqse.check<a name="line.2"></a>
<span class="sourceLineNo">003</span> |                                                                       |<a name="line.3"></a>
<span class="sourceLineNo">004</span>   $Id: FieldNamesMustNotBeASQLWordCheck.java 12395 2016-07-20 09:35:37Z pfaller $            <a name="line.4"></a>
<span class="sourceLineNo">005</span> |                                                                       |<a name="line.5"></a>
<span class="sourceLineNo">006</span> | Copyright (c)  2009-2015 CQSE GmbH                                 |<a name="line.6"></a>
<span class="sourceLineNo">007</span> +-----------------------------------------------------------------------*/<a name="line.7"></a>
<span class="sourceLineNo">008</span>package eu.cqse.check.hana_views;<a name="line.8"></a>
<span class="sourceLineNo">009</span><a name="line.9"></a>
<span class="sourceLineNo">010</span>import java.util.Set;<a name="line.10"></a>
<span class="sourceLineNo">011</span><a name="line.11"></a>
<span class="sourceLineNo">012</span>import org.conqat.lib.commons.collections.CollectionUtils;<a name="line.12"></a>
<span class="sourceLineNo">013</span>import org.xml.sax.Attributes;<a name="line.13"></a>
<span class="sourceLineNo">014</span><a name="line.14"></a>
<span class="sourceLineNo">015</span>import eu.cqse.check.framework.core.ACheck;<a name="line.15"></a>
<span class="sourceLineNo">016</span>import eu.cqse.check.framework.core.option.ACheckOption;<a name="line.16"></a>
<span class="sourceLineNo">017</span>import eu.cqse.check.framework.scanner.ELanguage;<a name="line.17"></a>
<span class="sourceLineNo">018</span>import eu.cqse.check.xml.XmlCheckBase;<a name="line.18"></a>
<span class="sourceLineNo">019</span>import eu.cqse.check.xml.XmlCheckHandlerBase;<a name="line.19"></a>
<span class="sourceLineNo">020</span>import eu.cqse.check.xml.XmlElementAttributesCheckHandlerBase;<a name="line.20"></a>
<span class="sourceLineNo">021</span><a name="line.21"></a>
<span class="sourceLineNo">022</span>/** {@ConQAT.Doc} */<a name="line.22"></a>
<span class="sourceLineNo">023</span>@ACheck(name = FieldNamesMustNotBeASQLWordCheck.CHECK_NAME, description = ""<a name="line.23"></a>
<span class="sourceLineNo">024</span>                + "Field names must not be a reserved word of SAP HANA SQL or SQL standard. "<a name="line.24"></a>
<span class="sourceLineNo">025</span>                + "See &lt;a href=\"http://help.sap.com/saphelp_hanaplatform/helpdata/en/20/9f5020751910148fd8fe88aa4d79d9/content.htm\"&gt;"<a name="line.25"></a>
<span class="sourceLineNo">026</span>                + "SAP HANA Reference&lt;/a&gt; for lists of reserved words.", groupName = IHanaViewCheckGroups.RESERVED_WORDS, languages = {<a name="line.26"></a>
<span class="sourceLineNo">027</span>                                ELanguage.HANA_VIEW })<a name="line.27"></a>
<span class="sourceLineNo">028</span>public class FieldNamesMustNotBeASQLWordCheck extends XmlCheckBase {<a name="line.28"></a>
<span class="sourceLineNo">029</span><a name="line.29"></a>
<span class="sourceLineNo">030</span>        /** Name of the check */<a name="line.30"></a>
<span class="sourceLineNo">031</span>        /* package */ static final String CHECK_NAME = "Field names must not be a SQL word";<a name="line.31"></a>
<span class="sourceLineNo">032</span><a name="line.32"></a>
<span class="sourceLineNo">033</span>        /**<a name="line.33"></a>
<span class="sourceLineNo">034</span>         * Set of reserved HANA SQL words. @see<a name="line.34"></a>
<span class="sourceLineNo">035</span>         * http://help.sap.com/saphelp_hanaplatform/helpdata/en/20/<a name="line.35"></a>
<span class="sourceLineNo">036</span>         * 9f5020751910148fd8fe88aa4d79d9/content.htm<a name="line.36"></a>
<span class="sourceLineNo">037</span>         */<a name="line.37"></a>
<span class="sourceLineNo">038</span>        private static final Set&lt;String&gt; HANA_SQL_WORDS = CollectionUtils.asHashSet("ALL", "ALTER", "AS", "BEFORE", "BEGIN",<a name="line.38"></a>
<span class="sourceLineNo">039</span>                        "BOTH", "CASE", "CHAR", "CONDITION", "CONNECT", "CROSS", "CUBE", "CURRENT_CONNECTION", "CURRENT_DATE",<a name="line.39"></a>
<span class="sourceLineNo">040</span>                        "CURRENT_SCHEMA", "CURRENT_TIME", "CURRENT_TIMESTAMP", "CURRENT_USER", "CURRENT_UTCDATE", "CURRENT_UTCTIME",<a name="line.40"></a>
<span class="sourceLineNo">041</span>                        "CURRENT_UTCTIMESTAMP", "CURRVAL", "CURSOR", "DECLARE", "DISTINCT", "ELSE", "ELSEIF", "END", "EXCEPT",<a name="line.41"></a>
<span class="sourceLineNo">042</span>                        "EXCEPTION", "EXEC", "FALSE", "FOR", "FROM", "FULL", "GROUP", "HAVING", "IF", "INNER", "IN", "INOUT",<a name="line.42"></a>
<span class="sourceLineNo">043</span>                        "INTERSECT", "INTO", "IS", "JOIN", "LEADING", "LEFT", "LIMIT", "LOOP", "MINUS", "NATURAL", "NCHAR",<a name="line.43"></a>
<span class="sourceLineNo">044</span>                        "NEXTVAL", "NULL", "ON", "ORDER", "OUT", "PRIOR", "RETURN", "RETURNS", "REVERSE", "RIGHT", "ROLLUP",<a name="line.44"></a>
<span class="sourceLineNo">045</span>                        "ROWID", "S ELECT", "SESSION_USER", "SET", "SQL", "START", "SYSUUID", "TABLESAMPLE", "TOP", "TRAILING",<a name="line.45"></a>
<span class="sourceLineNo">046</span>                        "TRUE", "UNION", "UNKNOWN", "USING", "UTCTIMESTAMP", "VALUES", "WHEN", "WHERE", "WHILE", "WITH");<a name="line.46"></a>
<span class="sourceLineNo">047</span><a name="line.47"></a>
<span class="sourceLineNo">048</span>        /**<a name="line.48"></a>
<span class="sourceLineNo">049</span>         * Set of reserved words in SQL Standard. @see<a name="line.49"></a>
<span class="sourceLineNo">050</span>         * http://help.sap.com/saphelp_hanaplatform/helpdata/en/20/<a name="line.50"></a>
<span class="sourceLineNo">051</span>         * 9f5020751910148fd8fe88aa4d79d9/content.htm<a name="line.51"></a>
<span class="sourceLineNo">052</span>         */<a name="line.52"></a>
<span class="sourceLineNo">053</span>        private static final Set&lt;String&gt; SQL_STANDARD_WORDS = CollectionUtils.asHashSet("ABS", "ALL", "ALLOCATE", "ALTER",<a name="line.53"></a>
<span class="sourceLineNo">054</span>                        "AND", "ANY", "ARE", "ARRAY", "ARRAY_AGG", "ARRAY_MAX_CARDINALITY", "AS", "ASENSITIVE", "ASYMMETRIC", "AT",<a name="line.54"></a>
<span class="sourceLineNo">055</span>                        "ATOMIC", "AUTHORIZATION", "AVG", "BEGIN", "BEGIN_FRAME", "BEGIN_PARTITION", "BETWEEN", "BIGINT", "BINARY",<a name="line.55"></a>
<span class="sourceLineNo">056</span>                        "BLOB", "BOOLEAN", "BOTH", "BY", "CALL", "CALLED", "CARDINALITY", "CASCADED", "CASE", "CAST", "CEIL",<a name="line.56"></a>
<span class="sourceLineNo">057</span>                        "CEILING", "CHAR", "CHAR_LENGTH", "CHARACTER", "CHARACTER_LENGTH", "CHECK", "CLASSIFIER", "CLOB", "CLOSE",<a name="line.57"></a>
<span class="sourceLineNo">058</span>                        "COALESCE", "COLLATE", "COLLECT", "COLUMN", "COMMIT", "CONDITION", "CONNECT", "CONSTRAINT", "CONTAINS",<a name="line.58"></a>
<span class="sourceLineNo">059</span>                        "CONVERT", "CORR", "CORRESPONDING", "COUNT", "COVAR_POP", "COVAR_SAMP", "CREATE", "CROSS", "CUBE",<a name="line.59"></a>
<span class="sourceLineNo">060</span>                        "CUME_DIST", "CURRENT", "CURRENT_CATALOG", "CURRENT_DATE", "CURRENT_DEFAULT_TRANSFORM_GROUP",<a name="line.60"></a>
<span class="sourceLineNo">061</span>                        "CURRENT_PATH", "CURRENT_ROLE", "CURRENT_ROW", "CURRENT_SCHEMA", "CURRENT_TIME", "CURRENT_TIMESTAMP",<a name="line.61"></a>
<span class="sourceLineNo">062</span>                        "CURRENT_TRANSFORM_GROUP_FOR_TYPE", "CURRENT_USER", "CURSOR", "CYCLE", "DATE", "DAY", "DEALLOCATE", "DEC",<a name="line.62"></a>
<span class="sourceLineNo">063</span>                        "DECIMAL", "DECLARE", "DEFAULT", "DEFINE", "DELETE", "DENSE_RANK", "DEREF", "DESCRIBE", "DETERMINISTIC",<a name="line.63"></a>
<span class="sourceLineNo">064</span>                        "DISCONNECT", "DISTINCT", "DOUBLE", "DROP", "DYNAMIC", "EACH", "ELEMENT", "ELSE", "EMPTY", "END",<a name="line.64"></a>
<span class="sourceLineNo">065</span>                        "END_FRAME", "END_PARTITION", "END-EXEC", "EQUALS", "ESCAPE", "EVERY", "EXCEPT", "EXEC", "EXECUTE",<a name="line.65"></a>
<span class="sourceLineNo">066</span>                        "EXISTS", "EXP", "EXTERNAL", "EXTRACT", "FALSE", "FETCH", "FILTER", "FIRST_VALUE", "FLOAT", "FLOOR", "FOR",<a name="line.66"></a>
<span class="sourceLineNo">067</span>                        "FOREIGN", "FRAME_ROW", "FREE", "FROM", "FULL", "FUNCTION", "FUSION", "GET", "GLOBAL", "GRANT", "GROUP",<a name="line.67"></a>
<span class="sourceLineNo">068</span>                        "GROUPING", "GROUPS", "HAVING", "HOLD", "HOUR", "IDENTITY", "IN", "INDICATOR", "INITIAL", "INNER", "INOUT",<a name="line.68"></a>
<span class="sourceLineNo">069</span>                        "INSENSITIVE", "INSERT", "INT", "INTEGER", "INTERSECT", "INTERSECTION", "INTERVAL", "INTO", "IS", "JOIN",<a name="line.69"></a>
<span class="sourceLineNo">070</span>                        "LAG", "LANGUAGE", "LARGE", "LAST_VALUE", "LATERAL", "LEAD", "LEADING", "LEFT", "LIKE", "LIKE_REGEX", "LN",<a name="line.70"></a>
<span class="sourceLineNo">071</span>                        "LOCAL", "LOCALTIME", "LOCALTIMESTAMP", "LOWER", "MATCH", "MATCH_NUMBER", "MATCH_RECOGNIZE", "MATCHES",<a name="line.71"></a>
<span class="sourceLineNo">072</span>                        "MAX", "MEMBER", "MERGE", "METHOD", "MIN", "MINUTE", "MOD", "MODIFIES", "MODULE", "MONTH", "MULTISET",<a name="line.72"></a>
<span class="sourceLineNo">073</span>                        "NATIONAL", "NATURAL", "NCHAR", "NCLOB", "NEW", "NO", "NONE", "NORMALIZE", "NOT", "NTH_VALUE", "NTILE",<a name="line.73"></a>
<span class="sourceLineNo">074</span>                        "NULL", "NULLIF", "NUMERIC", "OCTET_LENGTH", "OCCURRENCES_REGEX", "OF", "OFFSET", "OLD", "OMIT", "ON",<a name="line.74"></a>
<span class="sourceLineNo">075</span>                        "ONE", "ONLY", "OPEN", "OR", "ORDER", "OUT", "OUTER", "OVER", "OVERLAPS", "OVERLAY", "PARAMETER",<a name="line.75"></a>
<span class="sourceLineNo">076</span>                        "PARTITION", "PATTERN", "PER", "PERCENT", "PERCENT_RANK", "PERCENTILE_CONT", "PERCENTILE_DISC", "PERIOD",<a name="line.76"></a>
<span class="sourceLineNo">077</span>                        "PORTION", "POSITION", "POSITION_REGEX", "POWER", "PRECEDES", "PRECISION", "PREPARE", "PRIMARY",<a name="line.77"></a>
<span class="sourceLineNo">078</span>                        "PROCEDURE", "RANGE", "RANK", "READS", "REAL", "RECURSIVE", "REF", "REFERENCES", "REFERENCING", "REGR_AVGX",<a name="line.78"></a>
<span class="sourceLineNo">079</span>                        "REGR_AVGY", "REGR_COUNT", "REGR_INTERCEPT", "REGR_R2", "REGR_SLOPE", "REGR_SXX", "REGR_SXY", "REGR_SYY",<a name="line.79"></a>
<span class="sourceLineNo">080</span>                        "RELEASE", "RESULT", "RETURN", "RETURNS", "REVOKE", "RIGHT", "ROLLBACK", "ROLLUP", "ROW", "ROW_NUMBER",<a name="line.80"></a>
<span class="sourceLineNo">081</span>                        "ROWS", "RUNNING", "SAVEPOINT", "SCOPE", "SCROLL", "SEARCH", "SECOND", "SEEK", "SELECT", "SENSITIVE",<a name="line.81"></a>
<span class="sourceLineNo">082</span>                        "SESSION_USER", "SET", "SHOW", "SKIP", "SIMILAR", "SMALLINT", "SOME", "SPECIFIC", "SPECIFICTYPE", "SQL",<a name="line.82"></a>
<span class="sourceLineNo">083</span>                        "SQLEXCEPTION", "SQLSTATE", "SQLWARNING", "SQRT", "START", "STATIC", "STDDEV_POP", "STDDEV_SAMP",<a name="line.83"></a>
<span class="sourceLineNo">084</span>                        "SUBMULTISET", "SUBSET", "SUBSTRING", "SUBSTRING_REGEX", "SUCCEEDS", "SUM", "SYMMETRIC", "SYSTEM",<a name="line.84"></a>
<span class="sourceLineNo">085</span>                        "SYSTEM_TIME", "SYSTEM_USER", "TABLE", "TABLESAMPLE", "THEN", "TIME", "TIMESTAMP", "TIMEZONE_HOUR",<a name="line.85"></a>
<span class="sourceLineNo">086</span>                        "TIMEZONE_MINUTE", "TO", "TRAILING", "TRANSLATE", "TRANSLATE_REGEX", "TRANSLATION", "TREAT", "TRIGGER",<a name="line.86"></a>
<span class="sourceLineNo">087</span>                        "TRUNCATE", "TRIM", "TRIM_ARRAY", "TRUE", "UESCAPE", "UNION", "UNIQUE", "UNKNOWN", "UNNEST", "UPDATE",<a name="line.87"></a>
<span class="sourceLineNo">088</span>                        "UPPER", "USER", "USING", "VALUE", "VALUES", "VALUE_OF", "VAR_POP", "VAR_SAMP", "VARBINARY", "VARCHAR",<a name="line.88"></a>
<span class="sourceLineNo">089</span>                        "VARYING", "VERSIONING", "WHEN", "WHENEVER", "WHERE", "WIDTH_BUCKET", "WINDOW", "WITH", "WITHIN", "WITHOUT",<a name="line.89"></a>
<span class="sourceLineNo">090</span>                        "YEAR");<a name="line.90"></a>
<span class="sourceLineNo">091</span><a name="line.91"></a>
<span class="sourceLineNo">092</span>        /** {@ConQAT.Doc} */<a name="line.92"></a>
<span class="sourceLineNo">093</span>        @ACheckOption(name = CHECK_NAME<a name="line.93"></a>
<span class="sourceLineNo">094</span>                        + " - Include check for SQL standard words", description = "Check not only against HANA SQL words but alos find standard SQL words.")<a name="line.94"></a>
<span class="sourceLineNo">095</span>        private boolean isStandardWordsCheckEnabled = true;<a name="line.95"></a>
<span class="sourceLineNo">096</span><a name="line.96"></a>
<span class="sourceLineNo">097</span>        /** {@inheritDoc} */<a name="line.97"></a>
<span class="sourceLineNo">098</span>        @Override<a name="line.98"></a>
<span class="sourceLineNo">099</span>        public XmlCheckHandlerBase getHandler() {<a name="line.99"></a>
<span class="sourceLineNo">100</span>                return new XmlElementAttributesCheckHandlerBase(HanaViewsCheckUtil.FIELD_ELEMENTS) {<a name="line.100"></a>
<span class="sourceLineNo">101</span><a name="line.101"></a>
<span class="sourceLineNo">102</span>                        @Override<a name="line.102"></a>
<span class="sourceLineNo">103</span>                        protected void checkAttributes(Attributes attributes) {<a name="line.103"></a>
<span class="sourceLineNo">104</span>                                String fieldName = attributes.getValue(HanaViewsCheckUtil.ATTRIBUTE_ID);<a name="line.104"></a>
<span class="sourceLineNo">105</span>                                if (fieldName == null) {<a name="line.105"></a>
<span class="sourceLineNo">106</span>                                        return;<a name="line.106"></a>
<span class="sourceLineNo">107</span>                                }<a name="line.107"></a>
<span class="sourceLineNo">108</span>                                fieldName = fieldName.toUpperCase();<a name="line.108"></a>
<span class="sourceLineNo">109</span>                                if (HANA_SQL_WORDS.contains(fieldName)) {<a name="line.109"></a>
<span class="sourceLineNo">110</span>                                        createFinding("'" + fieldName + "' is a reserved HANA SQL word.");<a name="line.110"></a>
<span class="sourceLineNo">111</span>                                        return;<a name="line.111"></a>
<span class="sourceLineNo">112</span>                                }<a name="line.112"></a>
<span class="sourceLineNo">113</span>                                if (isStandardWordsCheckEnabled &amp;&amp; SQL_STANDARD_WORDS.contains(fieldName)) {<a name="line.113"></a>
<span class="sourceLineNo">114</span>                                        createFinding("'" + fieldName + "' is a reserved word in SQL Standard.");<a name="line.114"></a>
<span class="sourceLineNo">115</span>                                }<a name="line.115"></a>
<span class="sourceLineNo">116</span>                        }<a name="line.116"></a>
<span class="sourceLineNo">117</span>                };<a name="line.117"></a>
<span class="sourceLineNo">118</span>        }<a name="line.118"></a>
<span class="sourceLineNo">119</span><a name="line.119"></a>
<span class="sourceLineNo">120</span>}<a name="line.120"></a>




























































</pre>
</div>
</body>
</html>
